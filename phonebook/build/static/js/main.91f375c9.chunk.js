(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(13),o=t.n(a),r=t(0),c=t.n(r),u=t(2),l=t(3),i=t.n(l),d="/api/persons",m=function(){return i.a.get(d).then(function(e){return e.data})},f=function(e){return i.a.post(d,e).then(function(e){return e.data})},s=function(e,n){return i.a.put("".concat(d,"/").concat(e),n).then(function(e){return e.data})},h=function(e){return i.a.delete("".concat(d,"/").concat(e))},b=(t(37),function(e){var n=e.message,t=e.type;return null===n?null:c.a.createElement("div",{className:t},n)}),p=function(e){var n=e.value,t=e.onChange;return c.a.createElement("div",null,"filter shown with ",c.a.createElement("input",{value:n,onChange:t}))},v=function(e){return c.a.createElement("form",{onSubmit:e.addNewName},c.a.createElement("div",null,"name: ",c.a.createElement("input",{value:e.newName,onChange:e.handleNameChange})),c.a.createElement("div",null,"number: ",c.a.createElement("input",{value:e.newNumber,onChange:e.handleNumberChange})),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"add")))},w=function(e){var n=e.id,t=e.onClick;return c.a.createElement("button",{id:n,onClick:t},"delete")},g=function(e){var n=e.persons,t=e.onClick;return n.map(function(e){return c.a.createElement("div",{key:e.name},e.name," ",e.number," \xa0",c.a.createElement(w,{id:e.id,onClick:t}))})},E=function(){var e=Object(r.useState)([]),n=Object(u.a)(e,2),t=n[0],a=n[1],o=Object(r.useState)(""),l=Object(u.a)(o,2),i=l[0],d=l[1],w=Object(r.useState)(""),E=Object(u.a)(w,2),C=E[0],N=E[1],k=Object(r.useState)(""),j=Object(u.a)(k,2),O=j[0],y=j[1],S=Object(r.useState)([null,null]),T=Object(u.a)(S,2),x=T[0],D=T[1];Object(r.useEffect)(function(){m().then(function(e){return a(e)})},[]);var J=function(e,n){D([e,n]),setTimeout(function(){D([null,null])},5e3)},L=O?t.filter(function(e){return e.name.toLowerCase().includes(O.toLowerCase())}):t,P=function(e){console.log("persons: ".concat(t.map(function(e){return e.name}),", newname is ").concat(e));var n=t.find(function(n){return e===n.name});return n?n.id:0};return c.a.createElement("div",null,c.a.createElement("h2",null,"Phonebook"),c.a.createElement(b,{message:x[0],type:x[1]}),c.a.createElement(p,{value:O,onChange:function(e){y(e.target.value)}}),c.a.createElement("h2",null,"Add a new number"),c.a.createElement(v,{addNewName:function(e){e.preventDefault(),console.log({newName:i},P(i));var n={name:i,number:C},o=P(i);0!=o?window.confirm("".concat(i," is already added to phonebook, replace old number with new one?"))&&s(o,n).then(function(e){a(t.map(function(n){return n.id!==o?n:e})),J("The number of ".concat(i," has been been changed"),"info")}).catch(function(e){console.log(e),console.log("There is no endpoint defined in the express backend, so this PUT will not work anymore")}):f(n).then(function(e){console.log("adding person to database"),a(t.concat(e)),J("".concat(i," has been added to the database"),"info")}),d(""),N("")},newName:i,handleNameChange:function(e){d(e.target.value)},newNumber:C,handleNumberChange:function(e){N(e.target.value)}}),c.a.createElement("h2",null,"Numbers"),c.a.createElement(g,{persons:L,onClick:function(e){e.preventDefault();var n=t.find(function(n){return n.id===e.target.id});window.confirm("Really delete ".concat(n.name,"?"))&&h(n.id).then(function(e){console.log(t.filter(function(e){return e.id!==n.id})),a(t.filter(function(e){return e.id!==n.id})),J("".concat(n.name," has been been deleted"),"info")}).catch(function(e){J("".concat(n.name,"' was already deleted from server"),"error"),a(t.filter(function(e){return e.id!==n.id}))})}}))};o.a.render(c.a.createElement(E,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.91f375c9.chunk.js.map