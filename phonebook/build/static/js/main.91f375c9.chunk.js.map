{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","services_persons","axios","get","then","response","data","newObject","post","id","put","concat","delete","Notification","_ref","message","type","react_default","a","createElement","className","Filterpart","_ref2","value","onChange","Personform","props","onSubmit","addNewName","newName","handleNameChange","newNumber","handleNumberChange","Button","_ref3","onClick","Persons","_ref4","persons","map","person","key","name","number","App_Button","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","Filter","setFilter","_useState9","_useState10","notificationMessage","setNotification","useEffect","personService","initialPersons","handleNotificationChange","setTimeout","personsToShow","filter","toLowerCase","includes","userExists","username","console","log","personExists","find","App_Notification","App_Filterpart","event","target","App_Personform","preventDefault","nameObject","userId","window","confirm","returnedPerson","catch","error","App_Persons","persontoDel","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.91f375c9.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst del = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request\r\n}\r\n\r\nexport default { getAll, create, update, del }","import React, { useState, useEffect } from 'react'\r\nimport personService from './services/persons'\r\nimport './index.css'\r\n\r\nconst Notification = ({ message, type }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className={type}>\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Filterpart = ({ value, onChange}) => (\r\n    <div>filter shown with <input value={value} onChange={onChange} /></div>\r\n)\r\n\r\nconst Personform = (props) => {\r\n  return (\r\n    <form onSubmit={props.addNewName}>\r\n    <div>name: <input value={props.newName} onChange={props.handleNameChange} /></div>\r\n    <div>number: <input value={props.newNumber} onChange={props.handleNumberChange} /></div>\r\n    <div><button type=\"submit\">add</button></div>\r\n  </form>  \r\n  )\r\n}\r\n\r\nconst Button = ({ id, onClick }) => (\r\n  <button id={id} onClick={onClick}>delete</button>\r\n)\r\n\r\nconst Persons = ({ persons, onClick }) => persons.map(person => \r\n    <div key={person.name}>{person.name} {person.number} &nbsp;\r\n    <Button id={person.id} onClick={onClick} /></div>\r\n  )\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons] = useState([])\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ Filter, setFilter ] = useState('')\r\n  const [ notificationMessage, setNotification ] = useState([null, null])\r\n\r\n  useEffect(() => {\r\n    personService\r\n      .getAll()\r\n      .then(initialPersons => setPersons(initialPersons))\r\n  }, [])\r\n    \r\n    \r\n  const handleNameChange = (event) => {\r\n    // console.log(event.target.value)\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNumberChange = (event) => {\r\n    // console.log(event.target.value)\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const handleFilterChange = (event) => {\r\n    // console.log(event.target.value)\r\n    setFilter(event.target.value)\r\n  }\r\n\r\n  const handleNotificationChange = (message, type) => {\r\n    setNotification([message, type])\r\n    setTimeout(() => {\r\n      setNotification([null, null])\r\n    }, 5000)\r\n  }\r\n\r\n  const personsToShow = Filter\r\n      ? persons.filter(person => person.name.toLowerCase().includes(Filter.toLowerCase()))\r\n      : persons\r\n\r\n  const userExists = (username) => {\r\n    console.log(`persons: ${persons.map(person => person.name)}, newname is ${username}`)\r\n    const personExists = persons.find(person => username === person.name)\r\n    return personExists ? personExists.id : 0\r\n  }\r\n\r\n  const addNewName = (event) => {\r\n    event.preventDefault()\r\n    console.log({newName}, userExists(newName))\r\n    const nameObject = {\r\n      name: newName,\r\n      number: newNumber\r\n    }\r\n    const userId = userExists(newName)\r\n    if (userId != 0) {\r\n      if (window.confirm(`${newName} is already added to phonebook, replace old number with new one?`)) {\r\n        personService\r\n          .update(userId, nameObject)\r\n          .then(returnedPerson => {\r\n            setPersons(persons.map(person => person.id !== userId ? person : returnedPerson))\r\n            handleNotificationChange(`The number of ${newName} has been been changed`, 'info')\r\n          })\r\n          .catch(error => {\r\n            console.log(error)\r\n            console.log('There is no endpoint defined in the express backend, so this PUT will not work anymore')\r\n            // handleNotificationChange(`${newName} was already deleted from server`, 'error')\r\n            // setPersons(persons.filter(p => p.id !== userId))\r\n          })\r\n      } \r\n      \r\n    } else {\r\n      personService\r\n        .create(nameObject)\r\n        .then(data => {\r\n            console.log('adding person to database')\r\n            setPersons(persons.concat(data))\r\n            handleNotificationChange(`${newName} has been added to the database`, 'info')\r\n        })\r\n    }\r\n    setNewName('')\r\n    setNewNumber('')\r\n  }\r\n\r\n  const deleteName = (event) => {\r\n    event.preventDefault()\r\n    const persontoDel = persons.find(person => person.id === event.target.id)\r\n    if (window.confirm(`Really delete ${persontoDel.name}?`)) {\r\n      personService\r\n        .del(persontoDel.id)\r\n        .then(data => {\r\n          console.log(persons.filter(person => person.id !== persontoDel.id))\r\n          setPersons(persons.filter(person => person.id !== persontoDel.id))\r\n          handleNotificationChange(`${persontoDel.name} has been been deleted`, 'info')\r\n        })\r\n        .catch(error => {\r\n          handleNotificationChange(`${persontoDel.name}' was already deleted from server`, 'error')\r\n          setPersons(persons.filter(person => person.id !== persontoDel.id))\r\n        })\r\n    }  \r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={notificationMessage[0]} type={notificationMessage[1]}/>\r\n      <Filterpart value={Filter} onChange={handleFilterChange} />\r\n      <h2>Add a new number</h2>\r\n      <Personform addNewName={addNewName} newName={newName} handleNameChange={handleNameChange}\r\n      newNumber={newNumber} handleNumberChange={handleNumberChange} />\r\n      <h2>Numbers</h2>\r\n      <Persons persons={personsToShow} onClick={deleteName}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n\r\n","import ReactDOM from 'react-dom'\r\nimport React from 'react'\r\nimport App from './App'\r\n\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}